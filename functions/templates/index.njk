{% if event %}
  {% set ACTION_PATH = "/updateEvent" %}
{% else %}
  {% set ACTION_PATH = "/createEvent" %}
{% endif %}

{% extends "components/layout.njk" %}

{% block title -%}
  {{ event.name if event else "イツスル | 日程調整ツール" }}
{%- endblock %}

{% block main %}
  <form id="create-form" class="inherit-main" hx-post="{{API_BASE_PATH}}{{ ACTION_PATH }}"
          hx-swap="outerHTML" hx-select=".wrapper" hx-target="closest .wrapper">
    <div class="form-field">
      <h1 class="catch-copy">みんなと日程調整をスタート</h1>
      <div>
        <input type="text" id="event-name" name="name" 
                {% if event %}value="{{ event.name }}"{% endif %}
                placeholder="イベント名を入力してね" required="required"/>
      </div>
    </div>
    <div>
      {% if event %}
        <input id="datepicker" name="candidateDates" value="{{ event.candidateDates }}" hidden="hidden" required="required"/>
      {% else %}
        <input id="datepicker" name="candidateDates" hidden="hidden" required="required"/>
      {% endif %}
    </div>
    {% if event %}
      <input type="hidden" name="eventId" value="{{ event.id }}"/>
    {% endif %}
  </form>
{% endblock %}

{% block footer %}
  <button form="create-form" type="submit">
    {%- if event -%}イベント更新{%- else -%}イベント作成{%- endif -%}
    <img src="https://htmx.org/img/bars.svg" class="htmx-indicator" alt="loading..."/>
  </button>
{% endblock %}